# Mount Funtoo 2
# Created by github.com/kreyren
# License : I don't hugging care

CALLME="FUNTOO-MOUNT"

checkroot () {
# CHECK ROOT
	if [[ $UID == 0 ]]; then
		echo "something" 2&> /dev/null
		#No need to bother with "wow you are roooot!!"

		elif [[ -x "$(command -v sudo)" ]]; then
			echo -e "\e[1;32m$CALLME:\e[0m Failed to aquire root permission, trying using sudo."
			sudo $0 "$@"
			exit 1

		#TODO: Add sudo alternatives

		elif [[ ! -x "$(command -v sudo)" ]]; then
			echo -e "\e[1;32m$CALLME:\e[0m Failed to aquire root permission, trying using su."
			su -c "$0 $@"
			exit 1
	fi
}


something () {
if [[ FUNTOO_DIR == "" ]]; then
	echo "FUNTOO_DIR is blank!"
	exit 0
fi

if [[ -x $(command -v mount) && FUNTOO_DIR != "" ]]; then # TODO: and if mounted on funtoo
	mount --rbind /dev $FUNTOO_DIR/dev && mount --make-rslave $FUNTOO_DIR/dev && mount -t proc /proc $FUNTOO_DIR/proc ; mount --rbind /sys $FUNTOO_DIR/sys && mount --make-rslave $FUNTOO_DIR/sys && mount --rbind /tmp $FUNTOO_DIR/tmp && chroot $FUNTOO_DIR /bin/bash || echo "FATAL: Mounting failed" && exit 1
fi
}

case $1 in
	*)
	checkroot
	something
	;;
esac
